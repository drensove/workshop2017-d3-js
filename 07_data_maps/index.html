<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>journalists kills</title>
	<!--<script src="https://d3js.org/d3.v4.min.js"></script>-->
	<!--<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>-->
	<!--<link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/6.0.0/normalize.min.css">-->
	<link href="../css/main.css" rel="stylesheet" type="text/css" >
	<link href="../css/normalize.min.css" rel="stylesheet" type="text/css" >
	<script src="../library/d3.min.js"></script>
	<script src="../library/d3-scale-chromatic.v1.min.js"></script>

	<style type="text/css">
		.dot{
			stroke: none;
			fill:steelblue;
		}
		.dot2{
			stroke: none;
			fill:black;
		}
	</style>
</head>
<body>
<nav class="nav">
	<h3>Journalists Killed since 1992</h3>
	<a href="page01.html">Page 01</a>
	<a href="index.html" class="LinkActiv">Journalists-Kills</a>
</nav>
<div id="tooltip"></div>

<script type="text/javascript">

window.onload = function () {

		var margin = {top: 40, left: 300, bottom: 40, right: 100};
		var width = window.innerWidth * 0.9 - margin.left - margin.right;
		var height = window.innerHeight * 2 - margin.top - margin.bottom;
		
		var svg = d3.select('body').append('svg')
			.attr('height', height + margin.top + margin.bottom)
 			.attr('width', width + margin.left + margin.right)
 			.append('g')
 			.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

 		var tooltip = d3.select('#tooltip');


 		d3.csv('journalists_kills_mod5.csv', function(error, data) {
 			if (error) console.log(error);
		  	  			console.log(data);

		  	data.forEach(function(d) {
 			return{
 			Job : d.Job,
			Type : d.Type,
			Medium : d.Medium,
			Type_death : d.Type_death,
			Country_killed : d.Country_killed,
			Date : d.Date,
 		 	Name : d.Name
 		 	};
 			
 			});

 			


	

// y-Achse
 		var helper = {};
		var countries = [];

		data.forEach(function (d) {
   			if (helper[d.Country_killed] === undefined && d.Country_killed !== '' ){

      		// countries.push(d.Country_killed);
      		helper[d.Country_killed] = 0;	
   		}
			helper[d.Country_killed] = helper[d.Country_killed] + 1;
		});
		// countries.sort(); 

		for(var key in helper){
			if(helper.hasOwnProperty(key)){
				countries.push([key, helper[key]])
			}
		}


		console.log(helper);
		console.log(countries);


		var y = d3.scaleBand()
			.range([0, height])
			.padding(2)
			.domain(countries.map(function(d){
				return d[0];
			}));

			// x-Achse
	var x = d3.scaleLinear()
			.range([0, width])
			.domain([0, d3.max(countries, function (d) {
			return d[1];
			})]);		


//--draw axis--//
		svg.append('g')
			.attr('class', 'axis axis--people')
			.attr('transform', 'translate(0,' + height +')')
			.call(d3.axisBottom(x));

		svg.append('g')
			.attr('class', 'axis axis--coutries')
			.call(d3.axisLeft(y));	

		 svg.selectAll('.dots')
		 	.data(countries)
		 	.enter().append('circle')
		 	.attr('class', 'dots')
			.attr('cx', function (d) {
				return x(d[1]);
			})
			.attr('cy', function (d) {
				return y(d[0]);
			})
			.attr('r', 2);
			// .attr('width', x.bandwidth());


//--labelling--//
		// x-Achse
		svg.append("text")
      		.attr("x", width/2)
      		.attr("y", height+25)
      		.style("text-anchor", "middle")
      		.text("Kills")
      		.style("font-size", 16);

      	// y-Achse
        svg.append("text")
      		.attr("transform", "rotate(0)")
      		.attr("y", -15)
      		.attr("x", -30)
      		.style("text-anchor", "middle")
      		.text("Countries")
      		.style("font-size", 16);


 		}); //end from csv
 }; //end window
 	

		

	//::DEAD CODE:://////////////////////////////////////////////////////////

	//--mouseover--//
			// .on("mouseover", function(d) {

			// 	d3.select(this)
			// 		.style("stroke-width", 1)
			// 		.style("stroke", "black");

		 //       	tooltip
		 //       		.html("Date: " + formatTime(d.Date) + "<br>" + "Name: " + d.Name + "<br>" + "Local or Foreign: " + d.Local_Foreign + "<br>" + "Organization: " + d.Organization + "<br>")
		 //       		.style("visibility", "visible")
		 //            .style("left", (d3.event.pageX + 5) + "px")
		 //            .style("top", (d3.event.pageY - 28) + "px");

		 //     })


	// var deathJournalists = {};
		// var death = [];

		// data.forEach(function (d) {
		// 	if (deathJournalists[d.Country_killed] === undefined) {
		// 		death++;
		// 	}
		// });

		//console.log(deathJournalists);

	//--scaling--//
		
		// var x = d3.scalePoint()
		// 	.range([0,width])
		// 	.domain([Country_killed]);

		// var x = d3.scaleBand()
		// 			.rangeRound([0, width])
		// 			.domain(type1.map(function (d) {
		// 				return d;
		// 			}));

		// var x = d3.scaleBand()
		// 	.rangeRound([0, width])
		// 	.domain([Country_killed]);


	// data.forEach(function (d) {
		// 	if (helper[d.Country_killed] === undefined && d.Country_killed !== '') {
		// 	helper[d.Country_killed] = 0;
		// 	countries.push(d.Country_killed);
		// 	}

			// for (var death = 0; death < );

			// helper[d.Country_killed] = helper[d.Country_killed] + 1;
			// if (d.Country_killed !== '') {
			// 	helper[d.Country_killed] = helper[d.Country_killed] +1;
			// }
			// });


</script>
</body>
</html>
